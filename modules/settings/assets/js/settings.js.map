{"mappings":"A,C,SCiBK,E,S,E,C,E,O,G,E,U,C,E,O,C,C,C,I,E,C,ECjBL,EAAe,ODiBV,EAAe,CAAA,EAIlB,AAAA,EAAA,GAAO,UAAU,EAAE,CAAC,QAAS,8BAM9B,SAAuB,CAAa,EAC9B,QAAQ,aAAa,eAAe,CAAC,aAAa,GAAG,EAAE,cAAc,EAC3E,GALC,AAAA,EAAA,GAAO,UAAU,EAAE,CAAC,QAAS,0BAU9B,SAAuB,CAAa,EACnC,EAAE,cAAc,GAGhB,IAAM,EAAS,IAAI,CACnB,GAAI,CAAC,GAED,EAFS,OAGb,EAAe,CAAA,EACF,GAkCb,AAlCa,EAkCN,SAAS,CAAC,GAAG,CAAC,cAhCrB,IAAM,EAAkD,CAAC,EAKzD,OAHA,EAAK,UAAU,CAAG,EAAO,OAAO,CAAC,SAAS,CAC1C,EAAK,MAAM,CAAG,mBAEN,EAAK,UAAU,EACtB,IAAK,6BACJ,EAAK,KAAK,CAAG,aAAa,MAAM,CAAC,iBAAiB,CAClD,KAED,KAAK,qBACJ,EAAK,KAAK,CAAG,aAAa,MAAM,CAAC,gBAAgB,CACjD,KAED,KAAK,uBACJ,EAAK,KAAK,CAAG,aAAa,MAAM,CAAC,kBAAkB,AAErD,CAEA,AAAA,EAAA,GAAO,IAAI,CAAC,CACX,IAAK,QACL,KAAM,OACN,SAAU,OACV,KAAM,CACP,GAAG,MAAM,CAAC,WACT,EAAe,CAAA,EACH,GAWb,AAXa,EAWN,SAAS,CAAC,MAAM,CAAC,aAVxB,EACD,E,C","sources":["<anon>","modules/settings/assets/js/settings.ts","jQuery.js"],"sourcesContent":["(() => {\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\nvar $9ecc61fdda8d7e00$exports = {};\n$9ecc61fdda8d7e00$exports = jQuery;\n\n\n(function() {\n    let isRequesting = false;\n    function init() {\n        // @ts-ignore\n        (0, (/*@__PURE__*/$parcel$interopDefault($9ecc61fdda8d7e00$exports)))(document).on(\"click\", \".weed-reset-settings-button\", resetSettings);\n        // @ts-ignore\n        (0, (/*@__PURE__*/$parcel$interopDefault($9ecc61fdda8d7e00$exports)))(document).on(\"click\", \".weed-test-email-button\", sendTestEmail);\n    }\n    function resetSettings(e) {\n        if (!confirm(weedSettings.warningMessages.resetSettings)) e.preventDefault();\n    }\n    /**\n\t * Send test email via ajax request.\n\t */ function sendTestEmail(e) {\n        e.preventDefault();\n        // @ts-ignore\n        const button = this;\n        if (!button) return;\n        if (isRequesting) return;\n        isRequesting = true;\n        startLoading(button);\n        const data = {};\n        data.email_type = button.dataset.emailType;\n        data.action = \"weed_test_emails\";\n        switch(data.email_type){\n            case \"admin_new_user_notif_email\":\n                data.nonce = weedSettings.nonces.adminWelcomeEmail;\n                break;\n            case \"user_welcome_email\":\n                data.nonce = weedSettings.nonces.userWelcomeEmail;\n                break;\n            case \"reset_password_email\":\n                data.nonce = weedSettings.nonces.resetPasswordEmail;\n                break;\n        }\n        (0, (/*@__PURE__*/$parcel$interopDefault($9ecc61fdda8d7e00$exports))).ajax({\n            url: ajaxurl,\n            type: \"post\",\n            dataType: \"json\",\n            data: data\n        }).always(function() {\n            isRequesting = false;\n            stopLoading(button);\n        });\n    }\n    function startLoading(button) {\n        if (!button) return;\n        button.classList.add(\"is-loading\");\n    }\n    function stopLoading(button) {\n        if (!button) return;\n        button.classList.remove(\"is-loading\");\n    }\n    init();\n})();\n\n})();\n//# sourceMappingURL=settings.js.map\n","import van from \"vanjs-core\";\nimport jQuery from \"jquery\";\n\ndeclare var ajaxurl: string;\n\ndeclare var weedSettings: {\n\tnonces: {\n\t\tadminWelcomeEmail: string;\n\t\tuserWelcomeEmail: string;\n\t\tresetPasswordEmail: string;\n\t};\n\twarningMessages: {\n\t\tresetSettings: string;\n\t};\n};\n\n(function () {\n\tlet isRequesting = false;\n\n\tfunction init() {\n\t\t// @ts-ignore\n\t\tjQuery(document).on('click', '.weed-reset-settings-button', resetSettings);\n\n\t\t// @ts-ignore\n\t\tjQuery(document).on('click', '.weed-test-email-button', sendTestEmail);\n\t}\n\n\tfunction resetSettings(e: MouseEvent) {\n\t\tif (!confirm(weedSettings.warningMessages.resetSettings)) e.preventDefault();\n\t}\n\n\t/**\n\t * Send test email via ajax request.\n\t */\n\tfunction sendTestEmail(e: MouseEvent) {\n\t\te.preventDefault();\n\n\t\t// @ts-ignore\n\t\tconst button = this as HTMLButtonElement | null;\n\t\tif (!button) return;\n\n\t\tif (isRequesting) return;\n\t\tisRequesting = true;\n\t\tstartLoading(button);\n\n\t\tconst data: Record<string, string | undefined | null> = {};\n\n\t\tdata.email_type = button.dataset.emailType;\n\t\tdata.action = 'weed_test_emails'\n\n\t\tswitch (data.email_type) {\n\t\t\tcase 'admin_new_user_notif_email':\n\t\t\t\tdata.nonce = weedSettings.nonces.adminWelcomeEmail;\n\t\t\t\tbreak;\n\n\t\t\tcase 'user_welcome_email':\n\t\t\t\tdata.nonce = weedSettings.nonces.userWelcomeEmail;\n\t\t\t\tbreak;\n\n\t\t\tcase 'reset_password_email':\n\t\t\t\tdata.nonce = weedSettings.nonces.resetPasswordEmail;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tjQuery.ajax({\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'post',\n\t\t\tdataType: 'json',\n\t\t\tdata: data\n\t\t}).always(function () {\n\t\t\tisRequesting = false;\n\t\t\tstopLoading(button);\n\t\t})\n\t}\n\n\tfunction startLoading(button: HTMLButtonElement | null) {\n\t\tif (!button) return;\n\t\tbutton.classList.add('is-loading');\n\t}\n\n\tfunction stopLoading(button: HTMLButtonElement | null) {\n\t\tif (!button) return;\n\t\tbutton.classList.remove('is-loading');\n\t}\n\n\tinit();\n})();","module.exports=jQuery;"],"names":["isRequesting","$parcel$interopDefault","a","__esModule","default","$9ecc61fdda8d7e00$exports","jQuery","document","on","e","confirm","weedSettings","warningMessages","resetSettings","preventDefault","button","classList","add","data","email_type","dataset","emailType","action","nonce","nonces","adminWelcomeEmail","userWelcomeEmail","resetPasswordEmail","ajax","url","ajaxurl","type","dataType","always","remove"],"version":3,"file":"settings.js.map"}