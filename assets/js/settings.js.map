{"mappings":"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","sources":["<anon>","assets-src/ts/settings.ts","assets-src/ts/tabs.ts","assets-src/ts/template-tags.ts","assets-src/ts/utils.ts","assets-src/ts/test-emails.ts","assets-src/ts/conditional-fields.ts"],"sourcesContent":["(() => {\nfunction $f892de8327dc9e0f$export$2952830753ee3df9() {\n    const tabLinkList = document.querySelectorAll(\".heatbox-tab-nav-item a\");\n    tabLinkList.forEach(function(tabLink) {\n        tabLink.addEventListener(\"click\", function(e) {\n            const href = tabLink.href;\n            const hrefValue = href ? href.split(\"#\")[1] : \"\";\n            $f892de8327dc9e0f$var$switchTab(hrefValue);\n        });\n    });\n    window.addEventListener(\"load\", function(_e) {\n        let hash = window.location.hash;\n        hash = hash ? hash : \"#smtp\";\n        const hashValue = hash.replace(\"#\", \"\");\n        $f892de8327dc9e0f$var$switchTab(hashValue);\n    });\n}\nfunction $f892de8327dc9e0f$var$switchTab(tab) {\n    const tabLinkList = document.querySelectorAll(\".heatbox-tab-nav-item a\");\n    tabLinkList.forEach(function(tabLink) {\n        const parentEl = tabLink.parentElement;\n        if (!parentEl) return;\n        const href = tabLink.href;\n        const hrefValue = href ? href.split(\"#\")[1] : \"\";\n        if (hrefValue === tab) parentEl.classList.add(\"active\");\n        else parentEl.classList.remove(\"active\");\n    });\n    const tabContentList = document.querySelectorAll(\"[data-show-when-tab]\");\n    tabContentList.forEach(function(tabContent) {\n        const rawTabValue = tabContent.dataset.showWhenTab;\n        const tabValues = rawTabValue ? rawTabValue.split(\",\") : [];\n        const tabValuesTrimmed = tabValues.map((value)=>value.trim());\n        if (tabValuesTrimmed.includes(tab)) tabContent.style.display = \"block\";\n        else tabContent.style.display = \"none\";\n    });\n}\n\n\nasync function $0670dfea8ff007c0$export$2cdf1b96a9f86d16(text) {\n    try {\n        await navigator.clipboard.writeText(text);\n    } catch (err) {\n        // console.error(\"Unable to copy text to clipboard:\", err);\n        await $0670dfea8ff007c0$export$89296fcf373e3bb8(text);\n    }\n}\nasync function $0670dfea8ff007c0$export$89296fcf373e3bb8(text) {\n    const textArea = document.createElement(\"textarea\");\n    textArea.value = text;\n    textArea.style.position = \"fixed\";\n    textArea.style.top = \"-3px\";\n    textArea.style.left = \"-3px\";\n    textArea.style.width = \"1px\";\n    textArea.style.height = \"1px\";\n    textArea.style.background = \"transparent\";\n    textArea.style.opacity = \"0\";\n    document.body.appendChild(textArea);\n    textArea.focus();\n    textArea.select();\n    try {\n        document.execCommand(\"copy\");\n    } catch (err) {\n        console.error(\"Unable to copy text to clipboard:\", err);\n    }\n    document.body.removeChild(textArea);\n}\nfunction $0670dfea8ff007c0$export$fea330ef6103f535(button) {\n    if (!button) return;\n    button.classList.add(\"is-loading\");\n}\nfunction $0670dfea8ff007c0$export$4dabcd056c1d895c(button) {\n    if (!button) return;\n    button.classList.remove(\"is-loading\");\n}\n\n\nfunction $b3f9777c5cd7a583$export$68e1a451ce9a75b() {\n    init();\n    function init() {\n        const metabox = document.querySelector(\".weed-tags-metabox\");\n        if (!metabox) return;\n        const tags = metabox.querySelectorAll(\"code\");\n        if (!tags.length) return;\n        tags.forEach((tag)=>{\n            tag.addEventListener(\"click\", handleTagClick);\n        });\n    }\n    async function handleTagClick(e) {\n        const tag = e.target;\n        if (!tag) return;\n        const value = tag.innerText;\n        if (!value) return;\n        // Copy value to clipboard.\n        await (0, $0670dfea8ff007c0$export$2cdf1b96a9f86d16)(value);\n        const notice = document.querySelector(\".weed-tags-metabox .action-status\");\n        if (!notice) return;\n        notice.classList.add(\"is-shown\");\n        setTimeout(()=>{\n            notice.classList.remove(\"is-shown\");\n        }, 1500);\n    }\n}\n\n\n\nfunction $b7fa599c6ece7e06$export$f5ae4047b516e509() {\n    let isRequesting = false;\n    const noticeEl = document.querySelector(\".weed-submission-notice\");\n    init();\n    function init() {\n        // @ts-ignore\n        jQuery(document).on(\"click\", \".weed-test-email-button\", sendTestEmail);\n    }\n    /**\n\t * Send test email via ajax request.\n\t */ function sendTestEmail(e) {\n        e.preventDefault();\n        // @ts-ignore\n        const button = this;\n        if (!button) return;\n        if (isRequesting) return;\n        isRequesting = true;\n        (0, $0670dfea8ff007c0$export$fea330ef6103f535)(button);\n        const data = {};\n        data.email_type = button.dataset.emailType;\n        data.action = \"weed_test_emails\";\n        switch(data.email_type){\n            case \"admin_new_user_notif_email\":\n                data.nonce = weedSettings.nonces.adminWelcomeEmail;\n                break;\n            case \"user_welcome_email\":\n                data.nonce = weedSettings.nonces.userWelcomeEmail;\n                break;\n            case \"reset_password_email\":\n                data.nonce = weedSettings.nonces.resetPasswordEmail;\n                break;\n            case \"test_smtp_email\":\n                data.nonce = weedSettings.nonces.testSmtpEmail;\n                const toEmailField = document.querySelector(\"#weed_settings--test_smtp_recipient_email\");\n                data.to_email = toEmailField ? toEmailField.value : \"\";\n                break;\n        }\n        if (noticeEl) {\n            noticeEl.classList.add(\"is-hidden\");\n            noticeEl.classList.remove(\"is-error\");\n            noticeEl.classList.remove(\"is-success\");\n        }\n        jQuery.ajax({\n            url: ajaxurl,\n            type: \"post\",\n            dataType: \"json\",\n            data: data\n        }).always(function(r) {\n            isRequesting = false;\n            (0, $0670dfea8ff007c0$export$4dabcd056c1d895c)(button);\n            if (noticeEl) {\n                noticeEl.classList.remove(\"is-hidden\");\n                noticeEl.classList.add(r.success ? \"is-success\" : \"is-error\");\n                noticeEl.innerHTML = r.data ? r.data : \"\";\n            }\n        });\n    }\n}\n\n\nfunction $1ed547093d80174e$export$ba3937e898758160() {\n    const showWhenCheckedEls = document.querySelectorAll(\"[data-show-when-checked]\");\n    const fields = [];\n    const fieldNames = [];\n    const conditionalEls = [];\n    showWhenCheckedEls.forEach(function(showWhenCheckedEl) {\n        const rawFieldSelector = showWhenCheckedEl.dataset.showWhenChecked;\n        const fieldName = rawFieldSelector ? rawFieldSelector : \"\";\n        if (!fieldName) return;\n        const field = document.querySelector('[name=\"' + fieldName + '\"]');\n        if (!field) return;\n        if (!fieldNames.includes(fieldName)) {\n            fieldNames.push(fieldName);\n            fields.push(field);\n        }\n        conditionalEls.push(showWhenCheckedEl);\n        if (field.checked) showWhenCheckedEl.style.display = \"block\";\n        else showWhenCheckedEl.style.display = \"none\";\n    });\n    fields.forEach(function(field) {\n        field.addEventListener(\"change\", function(e) {\n            if (field.checked) conditionalEls.forEach(function(conditionalEl) {\n                const rawFieldSelector = conditionalEl.dataset.showWhenChecked;\n                const fieldName = rawFieldSelector ? rawFieldSelector : \"\";\n                if (!fieldName) return;\n                if (fieldName === field.name) conditionalEl.style.display = \"block\";\n            });\n            else conditionalEls.forEach(function(conditionalEl) {\n                const rawFieldSelector = conditionalEl.dataset.showWhenChecked;\n                const fieldName = rawFieldSelector ? rawFieldSelector : \"\";\n                if (!fieldName) return;\n                if (fieldName === field.name) conditionalEl.style.display = \"none\";\n            });\n        });\n    });\n    const smtpEncryptionFields = document.querySelectorAll('[name=\"weed_settings[smtp_encryption]\"]');\n    smtpEncryptionFields.forEach(function(smtpEncryptionField) {\n        smtpEncryptionField.addEventListener(\"change\", handleSmtpEncryptionFieldChange);\n    });\n    function handleSmtpEncryptionFieldChange(e) {\n        const value = e.target.value;\n        const smtpPortField = document.querySelector('[name=\"weed_settings[smtp_port]\"]');\n        if (!smtpPortField) return;\n        if (value === \"ssl\") smtpPortField.value = \"465\";\n        else if (value === \"tls\") smtpPortField.value = \"587\";\n        else smtpPortField.value = \"25\";\n    }\n}\n\n\n(0, $f892de8327dc9e0f$export$2952830753ee3df9)();\n(0, $b3f9777c5cd7a583$export$68e1a451ce9a75b)();\n(0, $1ed547093d80174e$export$ba3937e898758160)();\n(0, $b7fa599c6ece7e06$export$f5ae4047b516e509)();\n// @ts-ignore\njQuery(document).on(\"click\", \".weed-reset-settings-button\", $6c22cb9e1836caaa$var$resetSettings);\nfunction $6c22cb9e1836caaa$var$resetSettings(e) {\n    if (!confirm(weedSettings.warningMessages.resetSettings)) e.preventDefault();\n}\n\n})();\n//# sourceMappingURL=settings.js.map\n","import {setupTabs} from \"./tabs\";\nimport {setupTemplateTags} from \"./template-tags\";\nimport {setupTestEmails} from \"./test-emails\";\nimport {setupConditionalFields} from \"./conditional-fields\";\n\nsetupTabs();\nsetupTemplateTags();\nsetupConditionalFields();\nsetupTestEmails();\n\ndeclare var weedSettings: {\n\tnonces: {\n\t\tadminWelcomeEmail: string;\n\t\tuserWelcomeEmail: string;\n\t\tresetPasswordEmail: string;\n\t\ttestSmtpEmail: string;\n\t};\n\twarningMessages: {\n\t\tresetSettings: string;\n\t};\n};\n\n// @ts-ignore\njQuery(document).on(\"click\", \".weed-reset-settings-button\", resetSettings);\n\nfunction resetSettings(e: MouseEvent) {\n\tif (!confirm(weedSettings.warningMessages.resetSettings))\n\t\te.preventDefault();\n}\n","export function setupTabs(): void {\n\tconst tabLinkList = document.querySelectorAll(\n\t\t\".heatbox-tab-nav-item a\",\n\t) as NodeListOf<HTMLAnchorElement>;\n\n\ttabLinkList.forEach(function (tabLink) {\n\t\ttabLink.addEventListener(\"click\", function (e) {\n\t\t\tconst href = tabLink.href;\n\t\t\tconst hrefValue = href ? href.split(\"#\")[1] : \"\";\n\t\t\tswitchTab(hrefValue);\n\t\t});\n\t});\n\n\twindow.addEventListener(\"load\", function (_e) {\n\t\tlet hash = window.location.hash;\n\t\thash = hash ? hash : \"#smtp\";\n\t\tconst hashValue = hash.replace(\"#\", \"\");\n\n\t\tswitchTab(hashValue);\n\t});\n}\n\nfunction switchTab(tab: string): void {\n\tconst tabLinkList = document.querySelectorAll(\n\t\t\".heatbox-tab-nav-item a\",\n\t) as NodeListOf<HTMLAnchorElement>;\n\n\ttabLinkList.forEach(function (tabLink) {\n\t\tconst parentEl = tabLink.parentElement;\n\t\tif (!parentEl) return;\n\n\t\tconst href = tabLink.href;\n\t\tconst hrefValue = href ? href.split(\"#\")[1] : \"\";\n\n\t\tif (hrefValue === tab) {\n\t\t\tparentEl.classList.add(\"active\");\n\t\t} else {\n\t\t\tparentEl.classList.remove(\"active\");\n\t\t}\n\t});\n\n\tconst tabContentList = document.querySelectorAll(\n\t\t\"[data-show-when-tab]\",\n\t) as NodeListOf<HTMLElement>;\n\n\ttabContentList.forEach(function (tabContent) {\n\t\tconst rawTabValue = tabContent.dataset.showWhenTab;\n\t\tconst tabValues = rawTabValue ? rawTabValue.split(\",\") : [];\n\t\tconst tabValuesTrimmed = tabValues.map((value) => value.trim());\n\n\t\tif (tabValuesTrimmed.includes(tab)) {\n\t\t\ttabContent.style.display = \"block\";\n\t\t} else {\n\t\t\ttabContent.style.display = \"none\";\n\t\t}\n\t});\n}\n","import {copyToClipboard} from \"./utils\";\n\nexport function setupTemplateTags() {\n\tinit();\n\n\tfunction init() {\n\t\tconst metabox = document.querySelector(\".weed-tags-metabox\");\n\t\tif (!metabox) return;\n\n\t\tconst tags = metabox.querySelectorAll(\"code\");\n\t\tif (!tags.length) return;\n\n\t\ttags.forEach((tag) => {\n\t\t\ttag.addEventListener(\"click\", handleTagClick);\n\t\t});\n\t}\n\n\tasync function handleTagClick(e: Event) {\n\t\tconst tag = e.target as HTMLElement | null;\n\t\tif (!tag) return;\n\n\t\tconst value = tag.innerText;\n\t\tif (!value) return;\n\n\t\t// Copy value to clipboard.\n\t\tawait copyToClipboard(value);\n\n\t\tconst notice = document.querySelector(\n\t\t\t\".weed-tags-metabox .action-status\",\n\t\t) as HTMLElement | null;\n\t\tif (!notice) return;\n\n\t\tnotice.classList.add(\"is-shown\");\n\n\t\tsetTimeout(() => {\n\t\t\tnotice.classList.remove(\"is-shown\");\n\t\t}, 1500);\n\t}\n}","export async function copyToClipboard(text: string) {\n\ttry {\n\t\tawait navigator.clipboard.writeText(text);\n\t} catch (err) {\n\t\t// console.error(\"Unable to copy text to clipboard:\", err);\n\t\tawait copyToClipboardViaExecCommand(text);\n\t}\n}\n\nexport async function copyToClipboardViaExecCommand(text: string) {\n\tconst textArea = document.createElement(\"textarea\");\n\n\ttextArea.value = text;\n\ttextArea.style.position = \"fixed\";\n\ttextArea.style.top = \"-3px\";\n\ttextArea.style.left = \"-3px\";\n\ttextArea.style.width = \"1px\";\n\ttextArea.style.height = \"1px\";\n\ttextArea.style.background = \"transparent\";\n\ttextArea.style.opacity = \"0\";\n\n\tdocument.body.appendChild(textArea);\n\ttextArea.focus();\n\ttextArea.select();\n\n\ttry {\n\t\tdocument.execCommand(\"copy\");\n\t} catch (err) {\n\t\tconsole.error(\"Unable to copy text to clipboard:\", err);\n\t}\n\n\tdocument.body.removeChild(textArea);\n}\n\nexport function startLoading(button: HTMLButtonElement | null) {\n\tif (!button) return;\n\tbutton.classList.add(\"is-loading\");\n}\n\nexport function stopLoading(button: HTMLButtonElement | null) {\n\tif (!button) return;\n\tbutton.classList.remove(\"is-loading\");\n}","import {startLoading, stopLoading} from \"./utils\";\n\ndeclare var ajaxurl: string;\n\ndeclare var weedSettings: {\n\tnonces: {\n\t\tadminWelcomeEmail: string;\n\t\tuserWelcomeEmail: string;\n\t\tresetPasswordEmail: string;\n\t\ttestSmtpEmail: string;\n\t};\n\twarningMessages: {\n\t\tresetSettings: string;\n\t};\n};\n\nexport function setupTestEmails() {\n\tlet isRequesting = false;\n\tconst noticeEl = document.querySelector('.weed-submission-notice');\n\n\tinit();\n\n\tfunction init() {\n\t\t// @ts-ignore\n\t\tjQuery(document).on(\"click\", \".weed-test-email-button\", sendTestEmail);\n\t}\n\n\t/**\n\t * Send test email via ajax request.\n\t */\n\tfunction sendTestEmail(e: MouseEvent) {\n\t\te.preventDefault();\n\n\t\t// @ts-ignore\n\t\tconst button = this as HTMLButtonElement | null;\n\t\tif (!button) return;\n\n\t\tif (isRequesting) return;\n\t\tisRequesting = true;\n\t\tstartLoading(button);\n\n\t\tconst data: Record<string, string | undefined | null> = {};\n\n\t\tdata.email_type = button.dataset.emailType;\n\t\tdata.action = \"weed_test_emails\";\n\n\t\tswitch (data.email_type) {\n\t\t\tcase \"admin_new_user_notif_email\":\n\t\t\t\tdata.nonce = weedSettings.nonces.adminWelcomeEmail;\n\t\t\t\tbreak;\n\n\t\t\tcase \"user_welcome_email\":\n\t\t\t\tdata.nonce = weedSettings.nonces.userWelcomeEmail;\n\t\t\t\tbreak;\n\n\t\t\tcase \"reset_password_email\":\n\t\t\t\tdata.nonce = weedSettings.nonces.resetPasswordEmail;\n\t\t\t\tbreak;\n\n\t\t\tcase \"test_smtp_email\":\n\t\t\t\tdata.nonce = weedSettings.nonces.testSmtpEmail;\n\t\t\t\tconst toEmailField = document.querySelector('#weed_settings--test_smtp_recipient_email') as HTMLInputElement;\n\t\t\t\tdata.to_email = toEmailField ? toEmailField.value : '';\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (noticeEl) {\n\t\t\tnoticeEl.classList.add('is-hidden');\n\t\t\tnoticeEl.classList.remove('is-error');\n\t\t\tnoticeEl.classList.remove('is-success');\n\t\t}\n\n\t\tjQuery\n\t\t\t.ajax({\n\t\t\t\turl: ajaxurl,\n\t\t\t\ttype: \"post\",\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata: data,\n\t\t\t})\n\t\t\t.always(function (r) {\n\t\t\t\tisRequesting = false;\n\t\t\t\tstopLoading(button);\n\n\t\t\t\tif (noticeEl) {\n\t\t\t\t\tnoticeEl.classList.remove('is-hidden');\n\t\t\t\t\tnoticeEl.classList.add(r.success ? 'is-success' : 'is-error');\n\t\t\t\t\tnoticeEl.innerHTML = r.data ? r.data : '';\n\t\t\t\t}\n\t\t\t});\n\t}\n}","export function setupConditionalFields() {\n\tconst showWhenCheckedEls = document.querySelectorAll(\n\t\t\"[data-show-when-checked]\",\n\t) as NodeListOf<HTMLElement>;\n\n\tconst fields: HTMLInputElement[] = [];\n\tconst fieldNames: string[] = [];\n\tconst conditionalEls: HTMLElement[] = [];\n\n\tshowWhenCheckedEls.forEach(function (showWhenCheckedEl) {\n\t\tconst rawFieldSelector = showWhenCheckedEl.dataset.showWhenChecked;\n\t\tconst fieldName = rawFieldSelector ? rawFieldSelector : \"\";\n\t\tif (!fieldName) return;\n\n\t\tconst field = document.querySelector(\n\t\t\t'[name=\"' + fieldName + '\"]',\n\t\t) as HTMLInputElement;\n\t\tif (!field) return;\n\n\t\tif (!fieldNames.includes(fieldName)) {\n\t\t\tfieldNames.push(fieldName);\n\t\t\tfields.push(field);\n\t\t}\n\n\t\tconditionalEls.push(showWhenCheckedEl);\n\n\t\tif (field.checked) {\n\t\t\tshowWhenCheckedEl.style.display = \"block\";\n\t\t} else {\n\t\t\tshowWhenCheckedEl.style.display = \"none\";\n\t\t}\n\t});\n\n\tfields.forEach(function (field) {\n\t\tfield.addEventListener(\"change\", function (e) {\n\t\t\tif (field.checked) {\n\t\t\t\tconditionalEls.forEach(function (conditionalEl) {\n\t\t\t\t\tconst rawFieldSelector = conditionalEl.dataset.showWhenChecked;\n\t\t\t\t\tconst fieldName = rawFieldSelector ? rawFieldSelector : \"\";\n\t\t\t\t\tif (!fieldName) return;\n\n\t\t\t\t\tif (fieldName === field.name) {\n\t\t\t\t\t\tconditionalEl.style.display = \"block\";\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconditionalEls.forEach(function (conditionalEl) {\n\t\t\t\t\tconst rawFieldSelector = conditionalEl.dataset.showWhenChecked;\n\t\t\t\t\tconst fieldName = rawFieldSelector ? rawFieldSelector : \"\";\n\t\t\t\t\tif (!fieldName) return;\n\n\t\t\t\t\tif (fieldName === field.name) {\n\t\t\t\t\t\tconditionalEl.style.display = \"none\";\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\n\tconst smtpEncryptionFields = document.querySelectorAll('[name=\"weed_settings[smtp_encryption]\"]');\n\n\tsmtpEncryptionFields.forEach(function (smtpEncryptionField) {\n\t\tsmtpEncryptionField.addEventListener(\"change\", handleSmtpEncryptionFieldChange);\n\t});\n\n\tfunction handleSmtpEncryptionFieldChange(e: Event) {\n\t\tconst value = (e.target as HTMLInputElement).value;\n\t\tconst smtpPortField = document.querySelector('[name=\"weed_settings[smtp_port]\"]') as HTMLInputElement;\n\t\tif (!smtpPortField) return;\n\n\t\tif (value === \"ssl\") {\n\t\t\tsmtpPortField.value = \"465\";\n\t\t} else if (value === \"tls\") {\n\t\t\tsmtpPortField.value = \"587\";\n\t\t} else {\n\t\t\tsmtpPortField.value = \"25\";\n\t\t}\n\t}\n}\n"],"names":["$f892de8327dc9e0f$var$switchTab","tab","tabLinkList","document","querySelectorAll","forEach","tabLink","parentEl","parentElement","href","hrefValue","split","classList","add","remove","tabContentList","tabContent","rawTabValue","dataset","showWhenTab","tabValuesTrimmed","tabValues","map","value","trim","includes","style","display","$0670dfea8ff007c0$export$2cdf1b96a9f86d16","text","navigator","clipboard","writeText","err","$0670dfea8ff007c0$export$89296fcf373e3bb8","textArea","createElement","position","top","left","width","height","background","opacity","body","appendChild","focus","select","execCommand","console","error","removeChild","addEventListener","e","window","_e","hash","location","replace","init","metabox","querySelector","tags","length","tag","handleTagClick","target","innerText","notice","setTimeout","showWhenCheckedEls","fields","fieldNames","conditionalEls","handleSmtpEncryptionFieldChange","smtpPortField","showWhenCheckedEl","fieldName","rawFieldSelector","showWhenChecked","field","push","checked","conditionalEl","name","smtpEncryptionFields","smtpEncryptionField","isRequesting","noticeEl","jQuery","on","preventDefault","button","data","email_type","emailType","action","nonce","weedSettings","nonces","adminWelcomeEmail","userWelcomeEmail","resetPasswordEmail","testSmtpEmail","toEmailField","to_email","ajax","url","ajaxurl","type","dataType","always","r","success","innerHTML","confirm","warningMessages","resetSettings"],"version":3,"file":"settings.js.map"}