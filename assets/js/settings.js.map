{"mappings":"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","sources":["<anon>","assets-src/ts/settings.ts","assets-src/ts/tabs.ts","assets-src/ts/template-tags.ts","assets-src/ts/utils.ts","assets-src/ts/test-emails.ts"],"sourcesContent":["(() => {\nfunction $f892de8327dc9e0f$export$2952830753ee3df9($) {\n    $(\".heatbox-tab-nav-item\").on(\"click\", function(_e) {\n        $(\".heatbox-tab-nav-item\").removeClass(\"active\");\n        this.classList.add(\"active\");\n    });\n    $(\".smtp-panel\").on(\"click\", function(_e) {\n        $(\".heatbox-admin-panel\").css(\"display\", \"none\");\n        $(\".weed-smtp-panel\").css(\"display\", \"block\");\n    });\n    $(\".welcome-email-panel\").on(\"click\", function(_e) {\n        $(\".heatbox-admin-panel\").css(\"display\", \"none\");\n        $(\".weed-welcome-email-panel\").css(\"display\", \"block\");\n    });\n    $(\".misc-panel\").on(\"click\", function(_e) {\n        $(\".heatbox-admin-panel\").css(\"display\", \"none\");\n        $(\".weed-misc-panel\").css(\"display\", \"block\");\n    });\n    window.addEventListener(\"load\", function(_e) {\n        let hash = window.location.hash;\n        if (!hash) hash = \"#smtp\";\n        if (\"#smtp\" === hash) {\n            $(\".heatbox-tab-nav-item.smtp-panel\").addClass(\"active\");\n            $(\".weed-smtp-panel\").css(\"display\", \"block\");\n        }\n        if (\"#welcome-email\" === hash) {\n            $(\".heatbox-tab-nav-item.welcome-email-panel\").addClass(\"active\");\n            $(\".weed-welcome-email-panel\").css(\"display\", \"block\");\n        }\n        if (\"#misc\" === hash) {\n            $(\".heatbox-tab-nav-item.misc-panel\").addClass(\"active\");\n            $(\".weed-misc-panel\").css(\"display\", \"block\");\n        }\n    });\n}\n\n\nasync function $0670dfea8ff007c0$export$2cdf1b96a9f86d16(text) {\n    try {\n        await navigator.clipboard.writeText(text);\n    } catch (err) {\n        // console.error(\"Unable to copy text to clipboard:\", err);\n        await $0670dfea8ff007c0$export$89296fcf373e3bb8(text);\n    }\n}\nasync function $0670dfea8ff007c0$export$89296fcf373e3bb8(text) {\n    const textArea = document.createElement(\"textarea\");\n    textArea.value = text;\n    textArea.style.position = \"fixed\";\n    textArea.style.top = \"-3px\";\n    textArea.style.left = \"-3px\";\n    textArea.style.width = \"1px\";\n    textArea.style.height = \"1px\";\n    textArea.style.background = \"transparent\";\n    textArea.style.opacity = \"0\";\n    document.body.appendChild(textArea);\n    textArea.focus();\n    textArea.select();\n    try {\n        document.execCommand(\"copy\");\n    } catch (err) {\n        console.error(\"Unable to copy text to clipboard:\", err);\n    }\n    document.body.removeChild(textArea);\n}\nfunction $0670dfea8ff007c0$export$fea330ef6103f535(button) {\n    if (!button) return;\n    button.classList.add(\"is-loading\");\n}\nfunction $0670dfea8ff007c0$export$4dabcd056c1d895c(button) {\n    if (!button) return;\n    button.classList.remove(\"is-loading\");\n}\n\n\nfunction $b3f9777c5cd7a583$export$68e1a451ce9a75b() {\n    init();\n    function init() {\n        const metabox = document.querySelector(\".weed-tags-metabox\");\n        if (!metabox) return;\n        const tags = metabox.querySelectorAll(\"code\");\n        if (!tags.length) return;\n        tags.forEach((tag)=>{\n            tag.addEventListener(\"click\", handleTagClick);\n        });\n    }\n    async function handleTagClick(e) {\n        const tag = e.target;\n        if (!tag) return;\n        const value = tag.innerText;\n        if (!value) return;\n        // Copy value to clipboard.\n        await (0, $0670dfea8ff007c0$export$2cdf1b96a9f86d16)(value);\n        const notice = document.querySelector(\".weed-tags-metabox .action-status\");\n        if (!notice) return;\n        notice.classList.add(\"is-shown\");\n        setTimeout(()=>{\n            notice.classList.remove(\"is-shown\");\n        }, 1500);\n    }\n}\n\n\n\nfunction $b7fa599c6ece7e06$export$f5ae4047b516e509() {\n    let isRequesting = false;\n    init();\n    function init() {\n        // @ts-ignore\n        jQuery(document).on(\"click\", \".weed-reset-settings-button\", resetSettings);\n        // @ts-ignore\n        jQuery(document).on(\"click\", \".weed-test-email-button\", sendTestEmail);\n    }\n    /**\r\n\t * Send test email via ajax request.\r\n\t */ function sendTestEmail(e) {\n        e.preventDefault();\n        // @ts-ignore\n        const button = this;\n        if (!button) return;\n        if (isRequesting) return;\n        isRequesting = true;\n        (0, $0670dfea8ff007c0$export$fea330ef6103f535)(button);\n        const data = {};\n        data.email_type = button.dataset.emailType;\n        data.action = \"weed_test_emails\";\n        switch(data.email_type){\n            case \"admin_new_user_notif_email\":\n                data.nonce = weedSettings.nonces.adminWelcomeEmail;\n                break;\n            case \"user_welcome_email\":\n                data.nonce = weedSettings.nonces.userWelcomeEmail;\n                break;\n            case \"reset_password_email\":\n                data.nonce = weedSettings.nonces.resetPasswordEmail;\n                break;\n        }\n        jQuery.ajax({\n            url: ajaxurl,\n            type: \"post\",\n            dataType: \"json\",\n            data: data\n        }).always(function() {\n            isRequesting = false;\n            (0, $0670dfea8ff007c0$export$4dabcd056c1d895c)(button);\n        });\n    }\n    function resetSettings(e) {\n        if (!confirm(weedSettings.warningMessages.resetSettings)) e.preventDefault();\n    }\n}\n\n\n$6c22cb9e1836caaa$var$init();\nfunction $6c22cb9e1836caaa$var$init() {\n    (0, $f892de8327dc9e0f$export$2952830753ee3df9)(jQuery);\n    (0, $b3f9777c5cd7a583$export$68e1a451ce9a75b)();\n    (0, $b7fa599c6ece7e06$export$f5ae4047b516e509)();\n}\n\n})();\n//# sourceMappingURL=settings.js.map\n","import {setupTabs} from \"./tabs\";\nimport {setupTemplateTags} from \"./template-tags\";\nimport {setupTestEmails} from \"./test-emails\";\n\ninit();\n\nfunction init() {\n\tsetupTabs(jQuery);\n\tsetupTemplateTags();\n\tsetupTestEmails();\n}\n","import jQuery from \"jquery\";\r\n\r\nexport function setupTabs($: typeof jQuery): void {\r\n\t$(\".heatbox-tab-nav-item\").on(\"click\", function (_e) {\r\n\t\t$(\".heatbox-tab-nav-item\").removeClass(\"active\");\r\n\t\tthis.classList.add(\"active\");\r\n\t});\r\n\r\n\t$(\".smtp-panel\").on(\"click\", function (_e) {\r\n\t\t$(\".heatbox-admin-panel\").css(\"display\", \"none\");\r\n\t\t$(\".weed-smtp-panel\").css(\"display\", \"block\");\r\n\t});\r\n\r\n\t$(\".welcome-email-panel\").on(\"click\", function (_e) {\r\n\t\t$(\".heatbox-admin-panel\").css(\"display\", \"none\");\r\n\t\t$(\".weed-welcome-email-panel\").css(\"display\", \"block\");\r\n\t});\r\n\r\n\t$(\".misc-panel\").on(\"click\", function (_e) {\r\n\t\t$(\".heatbox-admin-panel\").css(\"display\", \"none\");\r\n\t\t$(\".weed-misc-panel\").css(\"display\", \"block\");\r\n\t});\r\n\r\n\twindow.addEventListener(\"load\", function (_e) {\r\n\t\tlet hash = window.location.hash;\r\n\r\n\t\tif (!hash) {\r\n\t\t\thash = \"#smtp\";\r\n\t\t}\r\n\r\n\t\tif (\"#smtp\" === hash) {\r\n\t\t\t$(\".heatbox-tab-nav-item.smtp-panel\").addClass(\"active\");\r\n\t\t\t$(\".weed-smtp-panel\").css(\"display\", \"block\");\r\n\t\t}\r\n\r\n\t\tif (\"#welcome-email\" === hash) {\r\n\t\t\t$(\".heatbox-tab-nav-item.welcome-email-panel\").addClass(\"active\");\r\n\t\t\t$(\".weed-welcome-email-panel\").css(\"display\", \"block\");\r\n\t\t}\r\n\r\n\t\tif (\"#misc\" === hash) {\r\n\t\t\t$(\".heatbox-tab-nav-item.misc-panel\").addClass(\"active\");\r\n\t\t\t$(\".weed-misc-panel\").css(\"display\", \"block\");\r\n\t\t}\r\n\t});\r\n}","import {copyToClipboard} from \"./utils\";\r\n\r\nexport function setupTemplateTags() {\r\n\tinit();\r\n\r\n\tfunction init() {\r\n\t\tconst metabox = document.querySelector(\".weed-tags-metabox\");\r\n\t\tif (!metabox) return;\r\n\r\n\t\tconst tags = metabox.querySelectorAll(\"code\");\r\n\t\tif (!tags.length) return;\r\n\r\n\t\ttags.forEach((tag) => {\r\n\t\t\ttag.addEventListener(\"click\", handleTagClick);\r\n\t\t});\r\n\t}\r\n\r\n\tasync function handleTagClick(e: Event) {\r\n\t\tconst tag = e.target as HTMLElement | null;\r\n\t\tif (!tag) return;\r\n\r\n\t\tconst value = tag.innerText;\r\n\t\tif (!value) return;\r\n\r\n\t\t// Copy value to clipboard.\r\n\t\tawait copyToClipboard(value);\r\n\r\n\t\tconst notice = document.querySelector(\r\n\t\t\t\".weed-tags-metabox .action-status\"\r\n\t\t) as HTMLElement | null;\r\n\t\tif (!notice) return;\r\n\r\n\t\tnotice.classList.add(\"is-shown\");\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tnotice.classList.remove(\"is-shown\");\r\n\t\t}, 1500);\r\n\t}\r\n}","export async function copyToClipboard(text: string) {\r\n\ttry {\r\n\t\tawait navigator.clipboard.writeText(text);\r\n\t} catch (err) {\r\n\t\t// console.error(\"Unable to copy text to clipboard:\", err);\r\n\t\tawait copyToClipboardViaExecCommand(text);\r\n\t}\r\n}\r\n\r\nexport async function copyToClipboardViaExecCommand(text: string) {\r\n\tconst textArea = document.createElement(\"textarea\");\r\n\r\n\ttextArea.value = text;\r\n\ttextArea.style.position = \"fixed\";\r\n\ttextArea.style.top = \"-3px\";\r\n\ttextArea.style.left = \"-3px\";\r\n\ttextArea.style.width = \"1px\";\r\n\ttextArea.style.height = \"1px\";\r\n\ttextArea.style.background = \"transparent\";\r\n\ttextArea.style.opacity = \"0\";\r\n\r\n\tdocument.body.appendChild(textArea);\r\n\ttextArea.focus();\r\n\ttextArea.select();\r\n\r\n\ttry {\r\n\t\tdocument.execCommand(\"copy\");\r\n\t} catch (err) {\r\n\t\tconsole.error(\"Unable to copy text to clipboard:\", err);\r\n\t}\r\n\r\n\tdocument.body.removeChild(textArea);\r\n}\r\n\r\nexport function startLoading(button: HTMLButtonElement | null) {\r\n\tif (!button) return;\r\n\tbutton.classList.add(\"is-loading\");\r\n}\r\n\r\nexport function stopLoading(button: HTMLButtonElement | null) {\r\n\tif (!button) return;\r\n\tbutton.classList.remove(\"is-loading\");\r\n}","import {startLoading, stopLoading} from \"./utils\";\r\n\r\ndeclare var ajaxurl: string;\r\n\r\ndeclare var weedSettings: {\r\n\tnonces: {\r\n\t\tadminWelcomeEmail: string;\r\n\t\tuserWelcomeEmail: string;\r\n\t\tresetPasswordEmail: string;\r\n\t};\r\n\twarningMessages: {\r\n\t\tresetSettings: string;\r\n\t};\r\n};\r\n\r\nexport function setupTestEmails() {\r\n\tlet isRequesting = false;\r\n\r\n\tinit();\r\n\r\n\tfunction init() {\r\n\t\t// @ts-ignore\r\n\t\tjQuery(document).on(\"click\", \".weed-reset-settings-button\", resetSettings);\r\n\r\n\t\t// @ts-ignore\r\n\t\tjQuery(document).on(\"click\", \".weed-test-email-button\", sendTestEmail);\r\n\t}\r\n\r\n\t/**\r\n\t * Send test email via ajax request.\r\n\t */\r\n\tfunction sendTestEmail(e: MouseEvent) {\r\n\t\te.preventDefault();\r\n\r\n\t\t// @ts-ignore\r\n\t\tconst button = this as HTMLButtonElement | null;\r\n\t\tif (!button) return;\r\n\r\n\t\tif (isRequesting) return;\r\n\t\tisRequesting = true;\r\n\t\tstartLoading(button);\r\n\r\n\t\tconst data: Record<string, string | undefined | null> = {};\r\n\r\n\t\tdata.email_type = button.dataset.emailType;\r\n\t\tdata.action = \"weed_test_emails\";\r\n\r\n\t\tswitch (data.email_type) {\r\n\t\t\tcase \"admin_new_user_notif_email\":\r\n\t\t\t\tdata.nonce = weedSettings.nonces.adminWelcomeEmail;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"user_welcome_email\":\r\n\t\t\t\tdata.nonce = weedSettings.nonces.userWelcomeEmail;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"reset_password_email\":\r\n\t\t\t\tdata.nonce = weedSettings.nonces.resetPasswordEmail;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tjQuery\r\n\t\t\t.ajax({\r\n\t\t\t\turl: ajaxurl,\r\n\t\t\t\ttype: \"post\",\r\n\t\t\t\tdataType: \"json\",\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.always(function () {\r\n\t\t\t\tisRequesting = false;\r\n\t\t\t\tstopLoading(button);\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction resetSettings(e: MouseEvent) {\r\n\t\tif (!confirm(weedSettings.warningMessages.resetSettings)) e.preventDefault();\r\n\t}\r\n}"],"names":["$","isRequesting","$0670dfea8ff007c0$export$2cdf1b96a9f86d16","text","navigator","clipboard","writeText","err","$0670dfea8ff007c0$export$89296fcf373e3bb8","textArea","document","createElement","value","style","position","top","left","width","height","background","opacity","body","appendChild","focus","select","execCommand","console","error","removeChild","jQuery","on","_e","removeClass","classList","add","css","window","addEventListener","hash","location","addClass","init","metabox","querySelector","tags","querySelectorAll","length","forEach","tag","handleTagClick","e","target","innerText","notice","setTimeout","remove","confirm","weedSettings","warningMessages","resetSettings","preventDefault","button","data","email_type","dataset","emailType","action","nonce","nonces","adminWelcomeEmail","userWelcomeEmail","resetPasswordEmail","ajax","url","ajaxurl","type","dataType","always"],"version":3,"file":"settings.js.map"}