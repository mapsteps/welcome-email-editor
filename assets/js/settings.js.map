{"mappings":"A,C,K,S,E,C,E,O,G,E,U,C,E,O,C,C,C,I,E,C,EGAO,eAAe,EAAgB,CAAY,EACjD,GAAI,CACH,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC,EACrC,CAAE,MAAO,EAAK,CAEb,MAAM,EAA8B,EACrC,CACD,CAEO,eAAe,EAA8B,CAAY,EAC/D,IAAM,EAAW,SAAS,aAAa,CAAC,WAExC,CAAA,EAAS,KAAK,CAAG,EACjB,EAAS,KAAK,CAAC,QAAQ,CAAG,QAC1B,EAAS,KAAK,CAAC,GAAG,CAAG,OACrB,EAAS,KAAK,CAAC,IAAI,CAAG,OACtB,EAAS,KAAK,CAAC,KAAK,CAAG,MACvB,EAAS,KAAK,CAAC,MAAM,CAAG,MACxB,EAAS,KAAK,CAAC,UAAU,CAAG,cAC5B,EAAS,KAAK,CAAC,OAAO,CAAG,IAEzB,SAAS,IAAI,CAAC,WAAW,CAAC,GAC1B,EAAS,KAAK,GACd,EAAS,MAAM,GAEf,GAAI,CACH,SAAS,WAAW,CAAC,OACtB,CAAE,MAAO,EAAK,CACb,QAAQ,KAAK,CAAC,oCAAqC,EACpD,CAEA,SAAS,IAAI,CAAC,WAAW,CAAC,EAC3B,CDhCA,EAAe,ODiBf,IAAI,EAAe,CAAA,EAwBnB,eAAe,EAAe,CAAQ,EACrC,IAAM,EAAM,EAAE,MAAM,CACpB,GAAI,CAAC,EAAK,OAEV,IAAM,EAAQ,EAAI,SAAS,CAC3B,GAAI,CAAC,EAAO,MAGZ,OAAM,AAAA,EAAgB,GAEtB,IAAM,EAAS,SAAS,aAAa,CACpC,qCAEI,IAEL,EAAO,SAAS,CAAC,GAAG,CAAC,YAErB,WAAW,KACV,EAAO,SAAS,CAAC,MAAM,CAAC,WACzB,EAAG,MACJ,CAxCC,AAAA,EAAA,GAAO,UAAU,EAAE,CAAC,QAAS,8BA0C9B,SAAuB,CAAa,EAC9B,QAAQ,aAAa,eAAe,CAAC,aAAa,GAAG,EAAE,cAAc,EAC3E,GAzCC,AAAA,EAAA,GAAO,UAAU,EAAE,CAAC,QAAS,0BA8C9B,SAAuB,CAAa,EACnC,EAAE,cAAc,GAGhB,IAAM,EAAS,IAAI,CACnB,GAAI,CAAC,GAED,EAFS,OAGb,EAAe,CAAA,EACF,GAoCb,AApCa,EAoCN,SAAS,CAAC,GAAG,CAAC,cAlCrB,IAAM,EAAkD,CAAC,EAKzD,OAHA,EAAK,UAAU,CAAG,EAAO,OAAO,CAAC,SAAS,CAC1C,EAAK,MAAM,CAAG,mBAEN,EAAK,UAAU,EACtB,IAAK,6BACJ,EAAK,KAAK,CAAG,aAAa,MAAM,CAAC,iBAAiB,CAClD,KAED,KAAK,qBACJ,EAAK,KAAK,CAAG,aAAa,MAAM,CAAC,gBAAgB,CACjD,KAED,KAAK,uBACJ,EAAK,KAAK,CAAG,aAAa,MAAM,CAAC,kBAAkB,AAErD,CAEA,AAAA,EAAA,GACE,IAAI,CAAC,CACL,IAAK,QACL,KAAM,OACN,SAAU,OACV,KAAM,CACP,GACC,MAAM,CAAC,WACP,EAAe,CAAA,EACH,GAWd,AAXc,EAWP,SAAS,CAAC,MAAM,CAAC,aAVvB,EACF,GArFC,AAGD,WACC,IAAM,EAAU,SAAS,aAAa,CAAC,sBACvC,GAAI,CAAC,EAAS,OAEd,IAAM,EAAO,EAAQ,gBAAgB,CAAC,OACjC,CAAA,EAAK,MAAM,EAEhB,EAAK,OAAO,CAAC,AAAC,IACb,EAAI,gBAAgB,CAAC,QAAS,EAC/B,EACD,G,C","sources":["<anon>","assets-src/ts/settings.ts","jQuery.js","assets-src/utils.ts"],"sourcesContent":["(() => {\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\nvar $9ecc61fdda8d7e00$exports = {};\n$9ecc61fdda8d7e00$exports = jQuery;\n\n\nasync function $3ff8938bedb03708$export$2cdf1b96a9f86d16(text) {\n    try {\n        await navigator.clipboard.writeText(text);\n    } catch (err) {\n        // console.error(\"Unable to copy text to clipboard:\", err);\n        await $3ff8938bedb03708$export$89296fcf373e3bb8(text);\n    }\n}\nasync function $3ff8938bedb03708$export$89296fcf373e3bb8(text) {\n    const textArea = document.createElement(\"textarea\");\n    textArea.value = text;\n    textArea.style.position = \"fixed\";\n    textArea.style.top = \"-3px\";\n    textArea.style.left = \"-3px\";\n    textArea.style.width = \"1px\";\n    textArea.style.height = \"1px\";\n    textArea.style.background = \"transparent\";\n    textArea.style.opacity = \"0\";\n    document.body.appendChild(textArea);\n    textArea.focus();\n    textArea.select();\n    try {\n        document.execCommand(\"copy\");\n    } catch (err) {\n        console.error(\"Unable to copy text to clipboard:\", err);\n    }\n    document.body.removeChild(textArea);\n}\n\n\nlet $6c22cb9e1836caaa$var$isRequesting = false;\nfunction $6c22cb9e1836caaa$var$init() {\n    // @ts-ignore\n    (0, (/*@__PURE__*/$parcel$interopDefault($9ecc61fdda8d7e00$exports)))(document).on(\"click\", \".weed-reset-settings-button\", $6c22cb9e1836caaa$var$resetSettings);\n    // @ts-ignore\n    (0, (/*@__PURE__*/$parcel$interopDefault($9ecc61fdda8d7e00$exports)))(document).on(\"click\", \".weed-test-email-button\", $6c22cb9e1836caaa$var$sendTestEmail);\n    $6c22cb9e1836caaa$var$setupTemplateTags();\n}\nfunction $6c22cb9e1836caaa$var$setupTemplateTags() {\n    const metabox = document.querySelector(\".weed-tags-metabox\");\n    if (!metabox) return;\n    const tags = metabox.querySelectorAll(\"code\");\n    if (!tags.length) return;\n    tags.forEach((tag)=>{\n        tag.addEventListener(\"click\", $6c22cb9e1836caaa$var$handleTagClick);\n    });\n}\nasync function $6c22cb9e1836caaa$var$handleTagClick(e) {\n    const tag = e.target;\n    if (!tag) return;\n    const value = tag.innerText;\n    if (!value) return;\n    // Copy value to clipboard.\n    await (0, $3ff8938bedb03708$export$2cdf1b96a9f86d16)(value);\n    const notice = document.querySelector(\".weed-tags-metabox .action-status\");\n    if (!notice) return;\n    notice.classList.add(\"is-shown\");\n    setTimeout(()=>{\n        notice.classList.remove(\"is-shown\");\n    }, 1500);\n}\nfunction $6c22cb9e1836caaa$var$resetSettings(e) {\n    if (!confirm(weedSettings.warningMessages.resetSettings)) e.preventDefault();\n}\n/**\n * Send test email via ajax request.\n */ function $6c22cb9e1836caaa$var$sendTestEmail(e) {\n    e.preventDefault();\n    // @ts-ignore\n    const button = this;\n    if (!button) return;\n    if ($6c22cb9e1836caaa$var$isRequesting) return;\n    $6c22cb9e1836caaa$var$isRequesting = true;\n    $6c22cb9e1836caaa$var$startLoading(button);\n    const data = {};\n    data.email_type = button.dataset.emailType;\n    data.action = \"weed_test_emails\";\n    switch(data.email_type){\n        case \"admin_new_user_notif_email\":\n            data.nonce = weedSettings.nonces.adminWelcomeEmail;\n            break;\n        case \"user_welcome_email\":\n            data.nonce = weedSettings.nonces.userWelcomeEmail;\n            break;\n        case \"reset_password_email\":\n            data.nonce = weedSettings.nonces.resetPasswordEmail;\n            break;\n    }\n    (0, (/*@__PURE__*/$parcel$interopDefault($9ecc61fdda8d7e00$exports))).ajax({\n        url: ajaxurl,\n        type: \"post\",\n        dataType: \"json\",\n        data: data\n    }).always(function() {\n        $6c22cb9e1836caaa$var$isRequesting = false;\n        $6c22cb9e1836caaa$var$stopLoading(button);\n    });\n}\nfunction $6c22cb9e1836caaa$var$startLoading(button) {\n    if (!button) return;\n    button.classList.add(\"is-loading\");\n}\nfunction $6c22cb9e1836caaa$var$stopLoading(button) {\n    if (!button) return;\n    button.classList.remove(\"is-loading\");\n}\n$6c22cb9e1836caaa$var$init();\n\n})();\n//# sourceMappingURL=settings.js.map\n","import van from \"vanjs-core\";\nimport jQuery from \"jquery\";\nimport { copyToClipboard } from \"../utils\";\n\ndeclare var ajaxurl: string;\n\ndeclare var weedSettings: {\n\tnonces: {\n\t\tadminWelcomeEmail: string;\n\t\tuserWelcomeEmail: string;\n\t\tresetPasswordEmail: string;\n\t};\n\twarningMessages: {\n\t\tresetSettings: string;\n\t};\n};\n\nlet isRequesting = false;\n\nfunction init() {\n\t// @ts-ignore\n\tjQuery(document).on(\"click\", \".weed-reset-settings-button\", resetSettings);\n\n\t// @ts-ignore\n\tjQuery(document).on(\"click\", \".weed-test-email-button\", sendTestEmail);\n\n\tsetupTemplateTags();\n}\n\nfunction setupTemplateTags() {\n\tconst metabox = document.querySelector(\".weed-tags-metabox\");\n\tif (!metabox) return;\n\n\tconst tags = metabox.querySelectorAll(\"code\");\n\tif (!tags.length) return;\n\n\ttags.forEach((tag) => {\n\t\ttag.addEventListener(\"click\", handleTagClick);\n\t});\n}\n\nasync function handleTagClick(e: Event) {\n\tconst tag = e.target as HTMLElement | null;\n\tif (!tag) return;\n\n\tconst value = tag.innerText;\n\tif (!value) return;\n\n\t// Copy value to clipboard.\n\tawait copyToClipboard(value);\n\n\tconst notice = document.querySelector(\n\t\t\".weed-tags-metabox .action-status\"\n\t) as HTMLElement | null;\n\tif (!notice) return;\n\n\tnotice.classList.add(\"is-shown\");\n\n\tsetTimeout(() => {\n\t\tnotice.classList.remove(\"is-shown\");\n\t}, 1500);\n}\n\nfunction resetSettings(e: MouseEvent) {\n\tif (!confirm(weedSettings.warningMessages.resetSettings)) e.preventDefault();\n}\n\n/**\n * Send test email via ajax request.\n */\nfunction sendTestEmail(e: MouseEvent) {\n\te.preventDefault();\n\n\t// @ts-ignore\n\tconst button = this as HTMLButtonElement | null;\n\tif (!button) return;\n\n\tif (isRequesting) return;\n\tisRequesting = true;\n\tstartLoading(button);\n\n\tconst data: Record<string, string | undefined | null> = {};\n\n\tdata.email_type = button.dataset.emailType;\n\tdata.action = \"weed_test_emails\";\n\n\tswitch (data.email_type) {\n\t\tcase \"admin_new_user_notif_email\":\n\t\t\tdata.nonce = weedSettings.nonces.adminWelcomeEmail;\n\t\t\tbreak;\n\n\t\tcase \"user_welcome_email\":\n\t\t\tdata.nonce = weedSettings.nonces.userWelcomeEmail;\n\t\t\tbreak;\n\n\t\tcase \"reset_password_email\":\n\t\t\tdata.nonce = weedSettings.nonces.resetPasswordEmail;\n\t\t\tbreak;\n\t}\n\n\tjQuery\n\t\t.ajax({\n\t\t\turl: ajaxurl,\n\t\t\ttype: \"post\",\n\t\t\tdataType: \"json\",\n\t\t\tdata: data,\n\t\t})\n\t\t.always(function () {\n\t\t\tisRequesting = false;\n\t\t\tstopLoading(button);\n\t\t});\n}\n\nfunction startLoading(button: HTMLButtonElement | null) {\n\tif (!button) return;\n\tbutton.classList.add(\"is-loading\");\n}\n\nfunction stopLoading(button: HTMLButtonElement | null) {\n\tif (!button) return;\n\tbutton.classList.remove(\"is-loading\");\n}\n\ninit();\n","module.exports=jQuery;","export async function copyToClipboard(text: string) {\r\n\ttry {\r\n\t\tawait navigator.clipboard.writeText(text);\r\n\t} catch (err) {\r\n\t\t// console.error(\"Unable to copy text to clipboard:\", err);\r\n\t\tawait copyToClipboardViaExecCommand(text);\r\n\t}\r\n}\r\n\r\nexport async function copyToClipboardViaExecCommand(text: string) {\r\n\tconst textArea = document.createElement(\"textarea\");\r\n\r\n\ttextArea.value = text;\r\n\ttextArea.style.position = \"fixed\";\r\n\ttextArea.style.top = \"-3px\";\r\n\ttextArea.style.left = \"-3px\";\r\n\ttextArea.style.width = \"1px\";\r\n\ttextArea.style.height = \"1px\";\r\n\ttextArea.style.background = \"transparent\";\r\n\ttextArea.style.opacity = \"0\";\r\n\r\n\tdocument.body.appendChild(textArea);\r\n\ttextArea.focus();\r\n\ttextArea.select();\r\n\r\n\ttry {\r\n\t\tdocument.execCommand(\"copy\");\r\n\t} catch (err) {\r\n\t\tconsole.error(\"Unable to copy text to clipboard:\", err);\r\n\t}\r\n\r\n\tdocument.body.removeChild(textArea);\r\n}"],"names":["$parcel$interopDefault","a","__esModule","default","$9ecc61fdda8d7e00$exports","$3ff8938bedb03708$export$2cdf1b96a9f86d16","text","navigator","clipboard","writeText","err","$3ff8938bedb03708$export$89296fcf373e3bb8","textArea","document","createElement","value","style","position","top","left","width","height","background","opacity","body","appendChild","focus","select","execCommand","console","error","removeChild","jQuery","$6c22cb9e1836caaa$var$isRequesting","$6c22cb9e1836caaa$var$handleTagClick","e","tag","target","innerText","notice","querySelector","classList","add","setTimeout","remove","on","confirm","weedSettings","warningMessages","resetSettings","preventDefault","button","data","email_type","dataset","emailType","action","nonce","nonces","adminWelcomeEmail","userWelcomeEmail","resetPasswordEmail","ajax","url","ajaxurl","type","dataType","always","$6c22cb9e1836caaa$var$setupTemplateTags","metabox","tags","querySelectorAll","length","forEach","addEventListener"],"version":3,"file":"settings.js.map"}